= Getting Started With Boclips API
Delivered to you by Boclips Engineering
:version-label: API Version
:doctype: book
:icons: font
:source-highlighter: highlightjs
:sectlinks:
:stylesheet: styles.css

[[welcome]]
== Hello, World!

Hello there fellow engineer and welcome to the Boclips API world ðŸ¤–

This is a quickstart guide to give you an overview of what integrating with our API looks like and provide you with some concrete examples and code snippets that will hopefully make your life easier.

As a one-liner intro, Boclips API is an *HTTP* based *REST* web API with *JSON* as the data exchange format.

If you're already familiar with the basics and are looking for detailed guide around the API resources, it can be found link:api-guide/index.html[here].

[[common-integration-scenarios]]
== Common Integration Scenarios

Sections below cover the usual integration use cases.

[[authenticating-with-api]]
=== Authenticating with the API

Our auth systems are based on https://www.oauth.com/oauth2-servers/access-tokens/client-credentials/[OAuth 2.0] and the credentials required to authenticate are the *client id* and *secret*. Currently, there isn't a self-served portal that will provide you with these, so our team will share them with you directly.

Once you have them, you can acquire an access token by issuing a request below:

include::{snippets}/client-credentials-example/http-request.adoc[]

[IMPORTANT]
Please note that the request needs to be sent with the `application/x-www-form-urlencoded` content type to be processed correctly.

This will give you back a JSON response similar to the one below:

[source,json]
{
  "access_token": "***",
  "expires_in": 300, <1>
  ...
}

<1> _Access token's lifetime expressed in seconds_

The value of the `access_token` field then needs to be attached as the `Bearer` token of the HTTP `Authorization` header to authorise the actual API requests, for example:

include::{snippets}/resource-video/http-request.adoc[]

=== Calling the Boclips API from your web app

As described in the section about authenticating, in order to successfully issue a call against Boclips API, you need to retrieve our access token and send it over in the `Authorization` header of any subsequent HTTP requests, for example using https://axios-http.com/[Axios]:

[source,javascript]
const response = await axios.get('https://api.boclips.com/v1/videos', { <1>
  headers: {
    'Authorization': `Bearer ${boclipsAccessToken}`
  }
})

<1> _Hardcoded URL is used here for simplicity, but you should consider using the link:api-guide/index.html#overview-hypermedia[links] exposed by Boclips API in your real implementation_

So far so good, but an important thing to consider is where the `boclipsAccessToken` is coming from.

If the web app acquires the access token by itself, it means that the client id and secret become exposed in its source code, effectively disclosing them to anyone who knows their way around the web browser's developer tools! ðŸ™€

The way our customers usually tackle this issue is by running an additional backend service that retrieves the access token on web app's behalf.

image::resources/token-retrieval.jpg[]

=== Integrating the Boclips Player into your web app

In order to integrate our video player into your web application, you're going to need just a couple of things:

. a way to fetch Boclips API access tokens (described above),
. the Boclips player sources,
. a video to display!

Now let's see how to put this together and show a playable video to your users! ðŸ› 

[source,html]
----
<html>
  <head>
    <script type="text/javascript" <1>
      src="https://unpkg.com/boclips-player@6.10.6/dist/boclips-player.js">
    </script>
    <link rel="stylesheet" type="text/css" <1>
      href="https://unpkg.com/boclips-player@6.10.6/dist/boclips-player.css"
    />
  </head>
  <body>
    <div id="container"></div> <2>
    <script>
      const renderPlayer = () => {
        const container = document.querySelector('#container'); <2>
        const playerOptions = {
          api: {
            tokenFactory: () => YourService.getBoclipsAccessToken() <3>
          }
        }
        const player = Boclips.PlayerFactory.get(container, playerOptions);
        player.loadVideo('https://api.boclips.com/v1/videos/5c542aba5438cdbcb56de630'); <4>
      };
      window.onload = (_event) => renderPlayer();
    </script>
  </body>
</html>
----

<1> _Player sources_
<2> _A container to render the player in_
<3> _A factory function to return Boclips API tokens_
<4> _Loading the video into the player (URL hardcoded for simplicity, consider using link:api-guide/index.html#overview-hypermedia[links] instead)_

Above is a minimal example that you can copy to get yourself started quickly.

Our player repository contains a few https://github.com/boclips/boclips-player/tree/main/demo[demo projects] too â€” give them a go if you're interested in the different ways of setting it up.

[[detailed-reference-guides]]
== Detailed Reference Guides
You can find detailed guides below.

[[api-reference-guide]]
=== API Reference Guide
This is the link to the link:api-guide/index.html[API reference guide].

[[player-reference-guide]]
=== Player Reference Guide
This is the link to the link:player-guide.html[Player reference guide].
